# Plan de Pruebas Funcionales: Gestor de Acciones de Mejora

## 1. Introducci贸n

### 1.1. Prop贸sito

Este documento detalla el plan de pruebas funcionales para la aplicaci贸n "Gestor de Acciones de Mejora". Su objetivo es validar que el software cumple con los requisitos funcionales especificados en el documento de An谩lisis Funcional (`ANALISIS_FUNCIONAL.md`), asegurando que cada funcionalidad opera correctamente desde la perspectiva del usuario.

### 1.2. Alcance de las Pruebas

El alcance de este plan incluye la verificaci贸n de las siguientes 谩reas funcionales:

-   Autenticaci贸n y gesti贸n de roles de usuario.
-   Creaci贸n, lectura, actualizaci贸n y eliminaci贸n (CRUD) de Acciones de Mejora.
-   El flujo de trabajo completo (ciclo de vida) de una acci贸n.
-   Funcionalidad del Panel de Control (Dashboard).
-   Integraci贸n de los asistentes de Inteligencia Artificial (Genkit).
-   Generaci贸n de informes y exportaci贸n de datos.

Las pruebas de rendimiento, seguridad a nivel de infraestructura y estr茅s quedan fuera del alcance de este documento.

## 2. Estrategia de Pruebas

La estrategia se basar谩 en **pruebas manuales** ejecutadas por un tester o un usuario clave. Cada caso de prueba est谩 dise帽ado para ser ejecutado de forma secuencial, siguiendo los pasos descritos y comparando el resultado obtenido con el resultado esperado.

## 3. Casos de Prueba (CPF)

A continuaci贸n, se detallan los casos de prueba agrupados por requisito funcional.

### 3.1. Autenticaci贸n y Gesti贸n de Usuarios (RF-001)

| ID      | Requisito | T铆tulo                                        | Pasos                                                                                                                                                                                            | Resultado Esperado                                                                                                                               |
| :------ | :-------- | :-------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------- |
| CPF-001 | RF-001.1  | Iniciar sesi贸n con Google                     | 1. Ir a la p谩gina de login. 2. Hacer clic en "Continuar con Google". 3. Seleccionar una cuenta de Google v谩lida.                                                                                     | El usuario es redirigido al Panel de Control de la aplicaci贸n.                                                                                   |
| CPF-002 | RF-001.2  | Iniciar sesi贸n con correo y contrase帽a        | 1. Ir a la p谩gina de login. 2. Introducir un email y contrase帽a de un usuario registrado. 3. Hacer clic en "Iniciar Sesi贸n".                                                                         | El usuario es redirigido al Panel de Control.                                                                                                    |
| CPF-003 | RF-001.2  | Fallo de inicio de sesi贸n con credenciales    | 1. Ir a la p谩gina de login. 2. Introducir un email correcto y una contrase帽a incorrecta. 3. Hacer clic en "Iniciar Sesi贸n".                                                                          | Se muestra un mensaje de error indicando que las credenciales son incorrectas. El usuario no accede a la aplicaci贸n.                           |
| CPF-004 | RF-001.4  | Acceso a Gesti贸n de Usuarios (Admin)          | 1. Iniciar sesi贸n como Administrador. 2. Navegar a la secci贸n "Gesti贸n de Usuarios" en la barra lateral.                                                                                              | El usuario puede acceder a la tabla de usuarios y ve las opciones para a帽adir, editar y eliminar usuarios.                                       |
| CPF-005 | RF-001.4  | Acceso denegado a Gesti贸n de Usuarios         | 1. Iniciar sesi贸n con un rol que no sea Administrador (p. ej., "Creador"). 2. Intentar acceder a la URL `/user-management`.                                                                           | El sistema no muestra el enlace en el men煤 y, si se accede por URL, deber铆a redirigir o mostrar un mensaje de acceso denegado.                  |
| CPF-006 | RF-001.5  | Suplantar identidad de otro usuario (Admin)   | 1. Iniciar sesi贸n como Administrador. 2. Ir a "Gesti贸n de Usuarios". 3. Hacer clic en el icono de "suplantar" de un usuario no administrador. 4. Navegar por la aplicaci贸n.                            | El sistema muestra una barra indicando la suplantaci贸n. La vista y permisos se corresponden con los del usuario suplantado.                       |

### 3.2. Gesti贸n de Acciones de Mejora (RF-002)

| ID      | Requisito | T铆tulo                            | Pasos                                                                                                                                                                                                                                     | Resultado Esperado                                                                                                                                    |
| :------ | :-------- | :-------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------ |
| CPF-007 | RF-002.1  | Crear una acci贸n como "Borrador"  | 1. Iniciar sesi贸n. 2. Hacer clic en el bot贸n "Crear Acci贸n". 3. Rellenar todos los campos obligatorios. 4. Hacer clic en "Guardar Borrador".                                                                                               | Se crea una nueva acci贸n con estado "Borrador". El usuario es el 煤nico que puede verla y editarla.                                                    |
| CPF-008 | RF-002.1  | Crear una acci贸n y "Enviar para An谩lisis" | 1. Iniciar sesi贸n. 2. Hacer clic en el bot贸n "Crear Acci贸n". 3. Rellenar todos los campos obligatorios. 4. Asignar un "Responsable de An谩lisis". 5. Hacer clic en "Enviar para An谩lisis".                                             | Se crea una nueva acci贸n con estado "Pendiente An谩lisis". Es visible para otros usuarios con permisos y se notifica (si aplica) al responsable.       |
| CPF-009 | RF-002.2  | Filtrar el listado de acciones     | 1. Ir a la secci贸n "Acciones". 2. Utilizar el filtro "Estado" y seleccionar "Finalizada". 3. Utilizar el campo de b煤squeda de texto para buscar por una palabra clave de un t铆tulo.                                                          | La tabla se actualiza y muestra 煤nicamente las acciones que cumplen con ambos criterios de filtro.                                                    |
| CPF-010 | RF-002.3  | Ver el detalle de una acci贸n      | 1. Iniciar sesi贸n. 2. Ir al listado de "Acciones". 3. Hacer clic en el ID o t铆tulo de una acci贸n.                                                                                                                                        | Se abre una nueva pesta帽a con la vista de detalle de la acci贸n seleccionada, mostrando toda su informaci贸n.                                          |
| CPF-011 | RF-002.5  | Seguir una acci贸n                 | 1. Ir al listado de "Acciones". 2. Hacer clic en el icono de estrella (``) de una acci贸n. 3. Ir al "Panel de Control".                                                                                                                      | La estrella se marca. La acci贸n aparece en el widget "Acciones en Seguimiento" del panel de control.                                                  |

### 3.3. Ciclo de Vida de una Acci贸n (RF-003)

| ID      | Requisito | T铆tulo                                         | Pasos                                                                                                                                                                                                                                                                                         | Resultado Esperado                                                                                                                                                                     |
| :------ | :-------- | :--------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| CPF-012 | RF-003    | Realizar an谩lisis y definir plan de acci贸n     | 1. Iniciar sesi贸n como "Responsable de An谩lisis" de una acci贸n "Pendiente An谩lisis". 2. Abrir la acci贸n. 3. Ir a la pesta帽a "Causas y Acci贸n Propuesta". 4. Rellenar el an谩lisis, a帽adir al menos una acci贸n en el plan y asignar un responsable de verificaci贸n. 5. Hacer clic en "Guardar y Avanzar". | La acci贸n cambia su estado a "Pendiente Comprobaci贸n". El responsable de verificaci贸n recibe una notificaci贸n (si aplica).                                                                |
| CPF-013 | RF-003    | Realizar la verificaci贸n de la implantaci贸n    | 1. Iniciar sesi贸n como "Responsable de Verificaci贸n" de una acci贸n "Pendiente Comprobaci贸n". 2. Abrir la acci贸n. 3. Ir a la pesta帽a "Verificaci贸n de Implantaci贸n". 4. Rellenar las observaciones y el estado de cada tarea del plan. 5. Hacer clic en "Guardar y Avanzar".                      | La acci贸n cambia su estado a "Pendiente de Cierre". El creador original de la acci贸n recibe una notificaci贸n (si aplica).                                                               |
| CPF-014 | RF-003    | Realizar cierre "Conforme"                     | 1. Iniciar sesi贸n como "Creador" de una acci贸n "Pendiente de Cierre". 2. Abrir la acci贸n. 3. Ir a la pesta帽a "Cierre de la Acci贸n". 4. Rellenar las observaciones y marcar el resultado como "Conforme". 5. Hacer clic en "Guardar y Cerrar Acci贸n".                                               | La acci贸n cambia su estado a "Finalizada". El ciclo de vida termina.                                                                                                                   |
| CPF-015 | RF-003    | Realizar cierre "No Conforme" y creaci贸n de BIS | 1. Iniciar sesi贸n como "Creador" de una acci贸n "Pendiente de Cierre". 2. Abrir la acci贸n. 3. Ir a la pesta帽a "Cierre de la Acci贸n". 4. Rellenar las observaciones y marcar el resultado como "No Conforme". 5. Hacer clic en "Guardar y Cerrar Acci贸n".                                             | La acci贸n original cambia su estado a "Finalizada (No Conforme)". El sistema crea autom谩ticamente una nueva acci贸n (BIS), vinculada a la original, y la pone en estado "Pendiente An谩lisis". |

### 3.4. Panel de Control (RF-004)

| ID      | Requisito | T铆tulo                             | Pasos                                                                                                                                                           | Resultado Esperado                                                                                                     |
| :------ | :-------- | :--------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------- |
| CPF-016 | RF-004.2  | Verificar "Mis Acciones Pendientes"  | 1. Iniciar sesi贸n como un usuario que es responsable de un an谩lisis. 2. Ir al Panel de Control.                                                                 | La acci贸n que requiere el an谩lisis aparece en el widget "Mis Acciones Pendientes".                                     |
| CPF-017 | RF-004.4  | Reordenar widgets del Dashboard    | 1. Iniciar sesi贸n. 2. En el Panel de Control, arrastrar el widget "Acciones en Seguimiento" y soltarlo encima del widget "Mis Acciones Pendientes". 3. Recargar la p谩gina. | La nueva disposici贸n de los widgets se mantiene despu茅s de recargar, indicando que se ha guardado la preferencia del usuario. |

### 3.5. Funcionalidades de IA (RF-005)

| ID      | Requisito | T铆tulo                                | Pasos                                                                                                                                                                                                                            | Resultado Esperado                                                                                                                                                  |
| :------ | :-------- | :------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| CPF-018 | RF-005.1  | Mejorar texto de observaciones con IA | 1. Al crear o editar una acci贸n, escribir un texto simple en el campo "Observaciones" (p. ej., "el papel no funciona"). 2. Hacer clic en el icono de la varita m谩gica (``).                                                            | Se abre un di谩logo con una sugerencia de texto mejorada por la IA (p. ej., "Se ha detectado una incidencia recurrente con el dispensador de papel..."). El usuario puede aceptarla. |
| CPF-019 | RF-005.2  | Sugerir an谩lisis de causas con IA     | 1. Como responsable de an谩lisis, abrir una acci贸n "Pendiente An谩lisis". 2. Ir a la pesta帽a "Causas y Acci贸n Propuesta". 3. Hacer clic en el bot贸n "Generar An谩lisis con IA".                                                          | Se abre un di谩logo con una propuesta de an谩lisis de causas y un plan de acci贸n generados por la IA. El usuario puede aceptar y rellenar el formulario con esos datos. |
| CPF-020 | RF-005.3  | Dictado por voz                       | 1. Al crear una acci贸n, hacer clic en el icono del micr贸fono (``) del campo "Observaciones". 2. Hablar de forma clara. 3. Hacer clic de nuevo para detener.                                                                      | El texto dictado por el usuario aparece transcrito en el campo "Observaciones".                                                                                    |

### 3.6. Informes y Exportaci贸n (RF-007)

| ID      | Requisito | T铆tulo                        | Pasos                                                                                                                                                           | Resultado Esperado                                                                                                         |
| :------ | :-------- | :---------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------- |
| CPF-021 | RF-007.2  | Exportar detalle de acci贸n a PDF | 1. Abrir la vista de detalle de cualquier acci贸n. 2. Hacer clic en el bot贸n "Exportar" y seleccionar "Exportar a PDF".                                           | Se genera y descarga un archivo PDF con toda la informaci贸n de la acci贸n, bien formateada y con el logotipo de la empresa. |
| CPF-022 | RF-007.3  | Exportar listado a Excel      | 1. Ir al listado de "Acciones". 2. Aplicar un filtro (p. ej., por estado). 3. Hacer clic en "Exportar" y seleccionar las secciones a incluir. 4. Clic en "Exportar a Excel". | Se descarga un archivo Excel (`.xlsx`) que contiene 煤nicamente las acciones filtradas y las columnas de datos seleccionadas. |
